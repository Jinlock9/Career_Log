# Task 02-01
- Date: 2025.02.06 ~ 

Now, Machine code sinking is not fully utilizing target's resource parallelism.
Also, it does not consider the latency of each instruction, hurting pipeline efficiency.
- Some codes sunk make instruction scheduling not fully effective.

#### References
- `docker exec -it heigui-dev /bin/bash`
- `DLCMachineScheduler.cpp`
    - `bool DLCVLIWResourceModel::reserveResources(SUnit *SU, bool IsTop)`
- `DLCTargetMachine.cpp`
    - `DLCPassConfig`, `substitutePass()`
- Debug info

    ```sh
    -misched-dump-schedule-trace --misched-verbose-level=2 --misched-dump-reser
    ved-cycles --sched-print-cycles --debug --debug-only="dlc-machine-scheduler"
    ```
- Compile

    ```sh
    /wkspc/heigui/LLVM/build/bin/llc -mtriple=dlc -enable-dlc-aa=true -large-interval-size-threshold=4 -large-interval-freq-threshold=4 --misched-bottomup --postra-bottomup --force-precise-rotation-cost=true -scheditins=false [.ll] -misched-dump-schedule-trace --misched-verbose-level=2 --misched-dump-reserved-cycles --sched-print-cycles --debug --debug-only="pipeliner,dlc-machine-scheduler" 2>&1
    ```

```
/wkspc/heigui/LLVM/build/bin/clang -target dlc -std=dc99 -emit-llvm -O2 -S ../../dlc_kernels/unfold.c -o unfold.ll

/wkspc/heigui/LLVM/build/bin/llc -mtriple=dlc -enable-dlc-aa=true -large-interval-size-threshold=4 -large-interval-freq-threshold=4 --misched-bottomup --postra-bottomup --force-precise-rotation-cost=true -scheditins=false unfold.ll -misched-dump-schedule-trace --misched-verbose-level=2 --misched-dump-reserved-cycles --sched-print-cycles --debug --debug-only="pipeliner,dlc-machine-scheduler"> log.txt  2>&1
```

- Peephole Optimizations (peephole-opt)
- DLC Remove dead machine instructions (dead-mi-elimination)
- DLC sync flag sinking (dlc-sync-sink)
- Slot index numbering (slotindexes)